<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>محفظة المستثمر | سما بابل للاستثمار</title>
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts - Tajawal for Arabic UI -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
    
    <!-- QR Code Scanner -->
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <link href="style.css" rel="stylesheet" />

    <style>
    
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Loading Screen -->
        <div class="loading" id="loadingScreen">
            <div class="loading-spinner"></div>
            <div class="loading-text">جاري التحميل...</div>
        </div>

        <!-- Login Screen -->
        <div class="login-screen" id="loginScreen">
            <div class="logo">
                <i class="fas fa-gem"></i>
            </div>
            
            <h2 style="margin-bottom: 30px; color: var(--gold); font-weight: 800;">سما بابل للاستثمار</h2>
            
            <div class="login-tabs">
                <button class="tab-btn active" onclick="switchTab('cardTab')">
                    <i class="fas fa-credit-card"></i> البطاقة
                </button>
                <button class="tab-btn" onclick="switchTab('qrTab')">
                    <i class="fas fa-qrcode"></i> QR Code
                </button>
            </div>

            <div id="errorMessage" class="error-message"></div>
            
            <div id="cardTab" class="tab-content active">
                <form id="loginForm" onsubmit="loginWithCard(event)">
                    <div class="form-group">
                        <label class="form-label">رقم البطاقة</label>
                        <input type="text" class="form-control" id="cardNumber" placeholder="XXXX XXXX XXXX XXXX" maxlength="19" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">تاريخ الانتهاء</label>
                        <input type="text" class="form-control" id="expiryDate" placeholder="MM/YY" maxlength="5" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">رمز الأمان (CVV)</label>
                        <input type="password" class="form-control" id="cvv" placeholder="XXX" maxlength="3" required>
                    </div>
                    <button type="submit" class="btn">
                        <i class="fas fa-sign-in-alt"></i> دخول
                    </button>
                </form>
            </div>
            
            <div id="qrTab" class="tab-content">
                <div id="qr-scanner"></div>
                <button id="startScanBtn" class="btn" onclick="startQRScan()">
                    <i class="fas fa-camera"></i> مسح رمز QR
                </button>
                
                <label for="qr-file-selector" class="btn btn-secondary img-upload-btn" style="margin-top: 15px;">
                    <i class="fas fa-upload"></i> تحميل صورة الباركود
                </label>
                <input type="file" id="qr-file-selector" accept="image/*" onchange="decodeQRFromImage(this.files[0])">
            </div>
        </div>

        <!-- Dashboard Screen -->
        <div class="dashboard" id="dashboardScreen">
            <!-- Header -->
            <div class="header">
                <div id="headerTitle">
                    <h1 id="sectionTitle">مشاريع الاستثمار</h1>
                    <div class="header-user" id="headerUsername">مرحباً، المستثمر</div>
                </div>
                <button class="refresh-btn" onclick="refreshDashboard()">
                    <i class="fas fa-sync-alt"></i>
                </button>
            </div>
            
            <!-- أيقونة البحث -->
            <div class="search-icon-container" id="searchIcon" onclick="toggleSearch()">
                <i class="fas fa-search"></i>
            </div>
            
            <!-- خانة البحث القابلة للتوسيع -->
            <div class="search-container" id="searchContainer">
                <div class="search-input">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="البحث عن مشاريع..." oninput="searchProjects(this.value)">
                </div>
            </div>

            <!-- Home Section (New main screen) -->
            <div id="homeSection">
                <!-- صفحة مشاريع الاستثمار (صفحة الرئيسية) -->
                <div class="user-header">
                    <div>
                        <div class="welcome-text" id="welcomeText">مرحباً، المستثمر</div>
                        <div class="welcome-subtitle">استكشف مشاريع الاستثمار المتاحة</div>
                    </div>
                    <div class="user-avatar" id="userAvatar">م</div>
                    
                    <!-- مفتاح وضع المشرف (مخفي للمستخدم العادي) -->
                    <div class="admin-mode-switch" id="adminModeSwitch" onclick="toggleAdminMode()">
                        <div class="toggle"></div>
                    </div>
                </div>
                
                <!-- قائمة منسدلة لإدارة المشاريع (تظهر للمشرف فقط) -->
                <div class="admin-dropdown" id="adminDropdown">
                    <div class="admin-dropdown-item" onclick="openAddCategoryModal()">
                        <i class="fas fa-folder-plus"></i>
                        <span>إضافة تصنيف جديد</span>
                    </div>
                    <div class="admin-dropdown-item" onclick="openManageCategoriesModal()">
                        <i class="fas fa-tasks"></i>
                        <span>إدارة التصنيفات</span>
                    </div>
                    <div class="admin-dropdown-item" onclick="openAddProjectModal()">
                        <i class="fas fa-plus-circle"></i>
                        <span>إضافة مشروع جديد</span>
                    </div>
                    <div class="admin-dropdown-item" onclick="toggleProjectEditMode()">
                        <i class="fas fa-edit"></i>
                        <span>تحرير المشاريع</span>
                    </div>
                </div>
                
                <!-- تصنيفات المشاريع -->
                <div class="categories-container">
                    <div class="categories-wrapper">
                        <div class="filter-tabs" id="projectCategories">
                            <div class="filter-tab active" data-category="all" onclick="filterProjects('all')">الكل</div>
                            <!-- سيتم إضافة التصنيفات ديناميكياً -->
                        </div>
                    </div>
                    <div class="categories-action" id="categoriesAction" style="display: none;">
                        <div class="add-category-btn" onclick="openAddCategoryModal()">
                            <i class="fas fa-plus"></i>
                        </div>
                    </div>
                </div>
                
                <!-- حاوية المشاريع - سيتم ملؤها ديناميكياً -->
                <div class="projects-grid" id="projectsGrid">
                    <!-- سيتم إضافة المشاريع هنا ديناميكياً من Firebase -->
                </div>
                
                <!-- زر إضافة مشروع جديد (يظهر للمشرف فقط) -->
                <div class="add-project-btn" id="addProjectBtn" onclick="openAddProjectModal()" style="display: none;">
                    <i class="fas fa-plus"></i>
                </div>
            </div>
            
            <!-- Card Section (محفظة المستثمر) -->
            <div id="cardSection">
                <!-- عرض البطاقة -->
                <div style="padding: 10px 10px 0;">
                    <div class="credit-card">
                        <div class="card-header">
                            <div class="card-chip"></div>
                            <div class="card-provider">INVESTOR</div>
                        </div>
                        <div class="card-number" id="displayCardNumber">2750 2380 1584 5063</div>
                        <div class="card-company" id="cardCompanyName">سما بابل للاستثمار</div>
                        <div class="card-info">
                            <div class="card-info-item">
                                <div class="card-info-label">الأرباح المستحقة</div>
                                <div class="card-info-value" id="cardDueProfit">1,458.333 د.ع</div>
                            </div>
                            <div class="card-info-item">
                                <div class="card-info-label">تاريخ الاستحقاق</div>
                                <div class="card-info-value" id="displayExpiryDate">05/27</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- معلومات الحساب -->
                <div class="info-cards">
                    <div class="info-card">
                        <h3>إجمالي المدفوع</h3>
                        <p id="totalInvestment">4,000.00 د.ع</p>
                    </div>
                    <div class="info-card">
                        <h3>الأرباح المستحقة</h3>
                        <p id="dueProfit">51,036.03 د.ع</p>
                    </div>
                    <div class="info-card">
                        <h3>تاريخ الاستحقاق</h3>
                        <p id="maturityDate">05/27</p>
                    </div>
                    <div class="info-card">
                        <h3>حالة الاستثمار</h3>
                        <p id="investmentStatus">نشط</p>
                    </div>
                </div>

                <!-- قسم إحصائيات الاستثمار (منقول من الصفحة الرئيسية) -->
                <div class="stats-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-chart-line"></i> إحصائيات استثماراتك
                        </h2>
                    </div>
                    
                    <div class="button-actions">
                        <div class="button-action" onclick="openWithdrawModal()">
                            <div class="button-action-icon">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <div class="button-action-label">طلب سحب</div>
                        </div>
                        <div
<div class="button-action" onclick="showDetails()">
                            <div class="button-action-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="button-action-label">تفاصيل الحساب</div>
                        </div>
                    </div>
                </div>

                <!-- قسم آخر النشاطات (منقول من الصفحة الرئيسية) -->
                <div class="activities-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-history"></i> آخر النشاطات
                        </h2>
                        <a href="#" class="view-all" onclick="switchSection('transactions')">عرض الكل</a>
                    </div>
                    
                    <div class="recent-activity" id="recentActivities">
                        <!-- سيتم تعبئة هذا القسم من خلال JavaScript -->
                    </div>
                </div>

                <!-- أزرار الإجراءات الأصلية -->
                <div class="actions">
                    <button class="action-btn" onclick="openWithdrawModal()">
                        <i class="fas fa-money-check-alt"></i> طلب سحب
                    </button>
                    <button class="action-btn" onclick="showDetails()">
                        <i class="fas fa-file-alt"></i> تفاصيل الحساب
                    </button>
                </div>

                <!-- آخر المعاملات الأصلية -->
                <div class="transactions">
                    <h2 class="section-title">
                        <i class="fas fa-history"></i> آخر المعاملات
                    </h2>
                    <div id="transactionsList">
                        <!-- Transactions will be populated here -->
                    </div>
                </div>
            </div>
            
            <!-- Profile Section -->
            <div class="profile-section" id="profileSection">
                <h2 class="section-title">
                    <i class="fas fa-user"></i> الملف الشخصي
                </h2>
                
                <div class="profile-header">
                    <div class="profile-avatar" id="profileAvatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="profile-name" id="profileName">خالد السعدي</div>
                    <div class="profile-card" id="profileCardNumber">2750 2380 1584 5063</div>
                </div>
                
                <div class="account-details">
                    <div class="detail-item">
                        <div class="detail-label">الاسم الكامل</div>
                        <div class="detail-value" id="profileFullName">خالد السعدي</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">رقم الهاتف</div>
                        <div class="detail-value" id="profilePhone">07701234567</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">البريد الإلكتروني</div>
                        <div class="detail-value" id="profileEmail">khalid@example.com</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">تاريخ الانضمام</div>
                        <div class="detail-value" id="profileJoinDate">10/01/2024</div>
                    </div>
                </div>
                
                <button class="btn" style="margin-top: 20px;" onclick="showContactSupport()">
                    <i class="fas fa-headset"></i> اتصل بالدعم
                </button>
                
               <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> تسجيل الخروج
                </button>
            </div>
            
            <!-- Transactions Section -->
            <div class="transactions-section" id="transactionsSection">
                <h2 class="section-title">
                    <i class="fas fa-exchange-alt"></i> سجل المعاملات
                </h2>
                
                <div class="transaction-filter">
                    <div class="filter-btn active" onclick="filterTransactions('all')">الكل</div>
                    <div class="filter-btn" onclick="filterTransactions('investment')">الاستثمارات</div>
                    <div class="filter-btn" onclick="filterTransactions('profit')">الأرباح</div>
                    <div class="filter-btn" onclick="filterTransactions('withdrawal')">السحوبات</div>
                </div>
                
                <div id="filteredTransactionsList">
                    <!-- Transactions will be populated here -->
                </div>
            </div>
            
            <!-- Notifications Section -->
            <div class="notifications-section" id="notificationsSection">
                <h2 class="section-title">
                    <i class="fas fa-bell"></i> التنبيهات والإشعارات
                </h2>
                
                <div id="notificationsList">
                    <!-- Notifications will be populated here -->
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav" id="bottomNav" style="display: none;">
            <div class="nav-item active" onclick="switchSection('home')">
                <i class="fas fa-home"></i>
                <span>الرئيسية</span>
            </div>
            <div class="nav-item" onclick="switchSection('card')">
                <i class="fas fa-credit-card"></i>
                <span>البطاقة</span>
            </div>
            <div class="nav-item" onclick="switchSection('transactions')">
                <i class="fas fa-exchange-alt"></i>
                <span>المعاملات</span>
            </div>
            <div class="nav-item" onclick="switchSection('notifications')">
                <i class="fas fa-bell"></i>
                <span>التنبيهات</span>
            </div>
            <div class="nav-item" onclick="switchSection('profile')">
                <i class="fas fa-user"></i>
                <span>الشخصي</span>
            </div>
        </div>

        <!-- Withdraw Modal -->
        <div class="modal" id="withdrawModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 style="color: var(--gold);">طلب سحب الأرباح</h2>
                    <button class="modal-close" onclick="closeWithdrawModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="withdrawForm" onsubmit="submitWithdrawRequest(event)">
                    <div class="form-group">
                        <label class="form-label">البطاقة</label>
                        <div class="card-display">
                            <span id="withdrawCardNumber" class="card-number-display">2750 2380 1584 5063</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">الرصيد المتاح للسحب</label>
                        <input type="text" class="form-control" id="availableBalance" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">المبلغ المطلوب سحبه</label>
                        <input type="number" class="form-control" id="withdrawAmount" min="50" required>
                        <div class="form-help-text">
                            <span id="withdrawMinAmount">الحد الأدنى: 50 د.ع</span>
                            <span id="withdrawMaxAmount">الحد الأقصى: 0 د.ع</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">طريقة الاستلام</label>
                        <select class="form-control" id="withdrawMethod" required>
                            <option value="cash">نقداً</option>
                            <option value="bank_transfer">حوالة بنكية</option>
                            <option value="e_wallet">محفظة إلكترونية</option>
                        </select>
                    </div>
                    <div class="form-group" id="bankDetailsGroup" style="display: none;">
                        <label class="form-label">تفاصيل الحساب البنكي</label>
                        <input type="text" class="form-control" id="bankDetails" placeholder="اسم البنك ورقم الحساب">
                        <div class="form-help-text">يرجى إدخال اسم البنك ورقم الحساب بشكل صحيح</div>
                    </div>
                    <div class="form-group" id="walletDetailsGroup" style="display: none;">
                        <label class="form-label">تفاصيل المحفظة الإلكترونية</label>
                        <input type="text" class="form-control" id="walletDetails" placeholder="نوع المحفظة ورقم الهاتف">
                        <div class="form-help-text">يرجى إدخال نوع المحفظة ورقم الهاتف بشكل صحيح</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ملاحظات</label>
                        <textarea class="form-control" id="withdrawNotes" rows="3" placeholder="يمكنك إضافة أي ملاحظات خاصة بطلب السحب هنا"></textarea>
                    </div>
                    <div class="alert-container">
                        <div id="withdrawError" class="error-message"></div>
                        <div id="withdrawSuccess" class="success-message"></div>
                    </div>
                    <div class="form-notice">
                        <i class="fas fa-info-circle"></i>
                        <span>سيتم مراجعة طلب السحب وقد يستغرق المعالجة من 1-3 أيام عمل.</span>
                    </div>
                    <button type="submit" class="btn">
                        <i class="fas fa-paper-plane"></i> إرسال الطلب
                    </button>
                </form>
            </div>
        </div>
        
        <!-- Contact Support Modal -->
        <div class="modal" id="supportModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 style="color: var(--gold);">اتصل بالدعم</h2>
                    <button class="modal-close" onclick="closeSupportModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="supportForm" onsubmit="submitSupportRequest(event)">
                    <div class="form-group">
                        <label class="form-label">موضوع المراسلة</label>
                        <select class="form-control" id="supportTopic" required>
                            <option value="">اختر الموضوع</option>
                            <option value="technical">مشكلة تقنية</option>
                            <option value="account">استفسار عن الحساب</option>
                            <option value="investment">استفسار عن الاستثمار</option>
                            <option value="other">أخرى</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">الرسالة</label>
                        <textarea class="form-control" id="supportMessage" rows="5" required></textarea>
                    </div>
                    <div id="supportError" class="error-message"></div>
                    <div id="supportSuccess" class="success-message"></div>
                    <button type="submit" class="btn">
                        <i class="fas fa-paper-plane"></i> إرسال
                    </button>
                </form>
            </div>
        </div>
        
        <!-- Account Details Modal -->
        <div class="modal" id="detailsModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 style="color: var(--gold);">تفاصيل الحساب</h2>
                    <button class="modal-close" onclick="closeDetailsModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="account-details">
                    <div class="detail-item">
                        <div class="detail-label">اسم المستثمر</div>
                        <div class="detail-value" id="detailsName">-</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">رقم البطاقة</div>
                        <div class="detail-value" id="detailsCardNumber">-</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">تاريخ الانتهاء</div>
                        <div class="detail-value" id="detailsExpiryDate">-</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">إجمالي الاستثمار</div>
                        <div class="detail-value" id="detailsTotalInvestment">-</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">إجمالي الأرباح</div>
                        <div class="detail-value" id="detailsTotalProfit">-</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">الأرباح المستحقة</div>
                        <div class="detail-value" id="detailsDueProfit">-</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">الأرباح المدفوعة</div>
                        <div class="detail-value" id="detailsPaidProfit">-</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">نوع الاستثمار</div>
                        <div class="detail-value" id="detailsInvestmentType">-</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">تاريخ الاستثمار</div>
                        <div class="detail-value" id="detailsInvestmentDate">-</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">تاريخ الاستحقاق</div>
                        <div class="detail-value" id="detailsMaturityDate">-</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notification Details Modal -->
        <div class="modal" id="notificationDetailsModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 style="color: var(--gold);" id="notificationDetailsTitle">تفاصيل الإشعار</h2>
                    <button class="modal-close" onclick="closeNotificationDetailsModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="account-details" id="notificationDetailsContent">
                    <!-- تفاصيل الإشعار ستظهر هنا -->
                </div>
            </div>
        </div>
        
        <!-- Project Details Modal -->
        <div class="modal" id="projectDetailsModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 style="color: var(--gold);" id="projectDetailsTitle">تفاصيل المشروع</h2>
                    <button class="modal-close" onclick="closeProjectDetailsModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div id="projectDetailsContent">
                    <!-- محتوى المشروع سيظهر هنا -->
                </div>
                <div class="form-notice">
                    <i class="fas fa-info-circle"></i>
                    <span>لمزيد من المعلومات، يرجى التواصل مع فريق خدمة العملاء.</span>
                </div>
                <button class="btn" onclick="applyForProject()">
                    <i class="fas fa-handshake"></i> استثمر الآن
                </button>
            </div>
        </div>
        
        <!-- نوافذ إدارة المشاريع والتصنيفات -->
        
        <!-- نافذة إضافة مشروع جديد -->
        <div class="modal" id="addProjectModal">
            <div class="modal-content large">
                <div class="modal-header">
                    <h2 style="color: var(--gold);">إضافة مشروع جديد</h2>
                    <button class="modal-close" onclick="closeAddProjectModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="addProjectForm" onsubmit="submitNewProject(event)">
                    <div class="form-group">
                        <label class="form-label">صورة المشروع</label>
                        <div class="image-preview" id="projectImagePreview" onclick="triggerImageUpload()">
                            <div class="image-preview-text">
                                <i class="fas fa-image"></i>
                                <span>انقر لتحميل صورة</span>
                            </div>
                        </div>
                        <input type="file" id="projectImageUpload" accept="image/*" style="display:none;" onchange="previewProjectImage(this)">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">عنوان المشروع</label>
                        <input type="text" class="form-control" id="projectTitle" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">تصنيف المشروع</label>
                        <select class="form-control" id="projectCategory" required>
                            <!-- سيتم تعبئة التصنيفات ديناميكياً -->
                        </select>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">العائد المتوقع</label>
                            <input type="text" class="form-control" id="projectReturn" placeholder="مثال: 15-20% سنوياً" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">مدة الاستثمار</label>
                            <input type="text" class="form-control" id="projectDuration" placeholder="مثال: 3-5 سنوات" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">الحد الأدنى للاستثمار</label>
                            <input type="text" class="form-control" id="projectMinInvestment" placeholder="مثال: 5,000 د.ع" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">القيمة الإجمالية للمشروع</label>
                            <input type="text" class="form-control" id="projectTotalValue" placeholder="مثال: 1,500,000 د.ع">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">وصف المشروع</label>
                        <textarea class="form-control" id="projectDescription" rows="4" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">مميزات المشروع</label>
                        <div class="text-editor" id="projectFeatures" contenteditable="true"></div>
                        <div class="form-help-text">أدخل كل ميزة في سطر منفصل</div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">أيقونة المشروع</label>
                        <select class="form-control" id="projectIcon">
                            <option value="building">مبنى (مشروع سكني)</option>
                            <option value="seedling">نباتات (مشروع زراعي)</option>
                            <option value="industry">مصنع (مشروع صناعي)</option>
                            <option value="shopping-cart">تسوق (مشروع تجاري)</option>
                            <option value="truck">نقل (مشروع لوجستي)</option>
                            <option value="medkit">صحة (مشروع طبي)</option>
                            <option value="graduation-cap">تعليم (مشروع تعليمي)</option>
                            <option value="hotel">فندق (مشروع سياحي)</option>
                            <option value="solar-panel">طاقة (مشروع طاقة)</option>
                            <option value="coins">استثمار (مشروع مالي)</option>
                        </select>
                    </div>
                    
                    <div class="alert-container">
                        <div id="addProjectError" class="error-message"></div>
                        <div id="addProjectSuccess" class="success-message"></div>
                    </div>
                    
                    <button type="submit" class="btn">
                        <i class="fas fa-plus-circle"></i> إضافة المشروع
                    </button>
                </form>
            </div>
        </div>
        
        <!-- نافذة إضافة تصنيف جديد -->
        <div class="modal" id="addCategoryModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 style="color: var(--gold);">إضافة تصنيف جديد</h2>
                    <button class="modal-close" onclick="closeAddCategoryModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="addCategoryForm" onsubmit="submitNewCategory(event)">
                    <div class="form-group">
                        <label class="form-label">اسم التصنيف</label>
                        <input type="text" class="form-control" id="categoryName" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">معرّف التصنيف (بالإنجليزية)</label>
                        <input type="text" class="form-control" id="categoryId" required>
                        <div class="form-help-text">مثال: real-estate</div>
                    </div>
                    <div class="alert-container">
                        <div id="addCategoryError" class="error-message"></div>
                        <div id="addCategorySuccess" class="success-message"></div>
                    </div>
                    <button type="submit" class="btn">
                        <i class="fas fa-plus-circle"></i> إضافة التصنيف
                    </button>
                </form>
            </div>
        </div>
        
        <!-- نافذة إدارة التصنيفات -->
        <div class="modal" id="manageCategoriesModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 style="color: var(--gold);">إدارة التصنيفات</h2>
                    <button class="modal-close" onclick="closeManageCategoriesModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div id="categoriesList" class="account-details">
                    <!-- سيتم تعبئة التصنيفات هنا -->
                </div>
                <button class="btn" onclick="openAddCategoryModal()" style="margin-top: 20px;">
                    <i class="fas fa-plus-circle"></i> إضافة تصنيف جديد
                </button>
            </div>
        </div>
        
        <!-- نافذة تعديل مشروع -->
        <div class="modal" id="editProjectModal">
            <div class="modal-content large">
                <div class="modal-header">
                    <h2 style="color: var(--gold);">تعديل المشروع</h2>
                    <button class="modal-close" onclick="closeEditProjectModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="editProjectForm" onsubmit="submitEditProject(event)">
                    <input type="hidden" id="editProjectId">
                    
                    <div class="form-group">
                        <label class="form-label">صورة المشروع</label>
                        <div class="image-preview" id="editProjectImagePreview" onclick="triggerEditImageUpload()">
                            <div class="image-preview-text">
                                <i class="fas fa-image"></i>
                                <span>انقر لتغيير الصورة</span>
                            </div>
                        </div>
                        <input type="file" id="editProjectImageUpload" accept="image/*" style="display:none;" onchange="previewEditProjectImage(this)">
                    </div>
                    
                    <!-- نفس العناصر كما في نافذة الإضافة لكن مع معرفات مختلفة -->
                    <div class="form-group">
                        <label class="form-label">عنوان المشروع</label>
                        <input type="text" class="form-control" id="editProjectTitle" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">تصنيف المشروع</label>
                        <select class="form-control" id="editProjectCategory" required>
                            <!-- سيتم تعبئة التصنيفات ديناميكياً -->
                        </select>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">العائد المتوقع</label>
                            <input type="text" class="form-control" id="editProjectReturn" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">مدة الاستثمار</label>
                            <input type="text" class="form-control" id="editProjectDuration" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">الحد الأدنى للاستثمار</label>
                            <input type="text" class="form-control" id="editProjectMinInvestment" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">القيمة الإجمالية للمشروع</label>
                            <input type="text" class="form-control" id="editProjectTotalValue">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">وصف المشروع</label>
                        <textarea class="form-control" id="editProjectDescription" rows="4" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">مميزات المشروع</label>
                        <div class="text-editor" id="editProjectFeatures" contenteditable="true"></div>
                        <div class="form-help-text">أدخل كل ميزة في سطر منفصل</div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">أيقونة المشروع</label>
                        <select class="form-control" id="editProjectIcon">
                            <option value="building">مبنى (مشروع سكني)</option>
                            <option value="seedling">نباتات (مشروع زراعي)</option>
                            <option value="industry">مصنع (مشروع صناعي)</option>
                            <option value="shopping-cart">تسوق (مشروع تجاري)</option>
                            <option value="truck">نقل (مشروع لوجستي)</option>
                            <option value="medkit">صحة (مشروع طبي)</option>
                            <option value="graduation-cap">تعليم (مشروع تعليمي)</option>
                            <option value="hotel">فندق (مشروع سياحي)</option>
                            <option value="solar-panel">طاقة (مشروع طاقة)</option>
                            <option value="coins">استثمار (مشروع مالي)</option>
                        </select>
                    </div>
                    
                    <div class="alert-container">
                        <div id="editProjectError" class="error-message"></div>
                        <div id="editProjectSuccess" class="success-message"></div>
                    </div>
                    
                    <div class="form-row">
                        <button type="submit" class="btn" style="margin-left: 10px;">
                            <i class="fas fa-save"></i> حفظ التغييرات
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="deleteProject()">
                            <i class="fas fa-trash-alt"></i> حذف المشروع
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Notification Toast Container -->
        <div id="notificationToastContainer"></div>
    </div>

   <script src="app.js"></script>
   
    </script>
</body>
</html>

                        
